<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Introduction to Data Science</title>
  <meta name="description" content="This book introduces concepts and skills that can help you tackle real-world data analysis challenges. It covers concepts from probability, statistical inference, linear regression and machine learning and helps you develop skills such as R programming, data wrangling with dplyr, data visualization with ggplot2, file organization with UNIX/Linux shell, version control with GitHub, and reproducible document preparation with R markdown.">
  <meta name="generator" content="bookdown 0.5 and GitBook 2.6.7">

  <meta property="og:title" content="Introduction to Data Science" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This book introduces concepts and skills that can help you tackle real-world data analysis challenges. It covers concepts from probability, statistical inference, linear regression and machine learning and helps you develop skills such as R programming, data wrangling with dplyr, data visualization with ggplot2, file organization with UNIX/Linux shell, version control with GitHub, and reproducible document preparation with R markdown." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Introduction to Data Science" />
  
  <meta name="twitter:description" content="This book introduces concepts and skills that can help you tackle real-world data analysis challenges. It covers concepts from probability, statistical inference, linear regression and machine learning and helps you develop skills such as R programming, data wrangling with dplyr, data visualization with ggplot2, file organization with UNIX/Linux shell, version control with GitHub, and reproducible document preparation with R markdown." />
  

<meta name="author" content="Rafael A. Irizarry">


<meta name="date" content="2017-11-08">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="distributions.html">
<link rel="next" href="summarizing-data-with-dplyr.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Introduction to Data Science</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="introduction.html"><a href="introduction.html#case-studies"><i class="fa fa-check"></i><b>1.1</b> Case Studies</a></li>
<li class="chapter" data-level="1.2" data-path="introduction.html"><a href="introduction.html#who-will-find-this-book-useful"><i class="fa fa-check"></i><b>1.2</b> Who Will Find This Book Useful?</a></li>
<li class="chapter" data-level="1.3" data-path="introduction.html"><a href="introduction.html#what-does-this-book-cover"><i class="fa fa-check"></i><b>1.3</b> What Does This Book Cover?</a></li>
<li class="chapter" data-level="1.4" data-path="introduction.html"><a href="introduction.html#what-is-not-covered-by-this-book"><i class="fa fa-check"></i><b>1.4</b> What is Not Covered by This Book?</a></li>
</ul></li>
<li class="part"><span><b>I R Basics</b></span></li>
<li class="chapter" data-level="2" data-path="introduction-1.html"><a href="introduction-1.html"><i class="fa fa-check"></i><b>2</b> Introduction</a></li>
<li class="chapter" data-level="3" data-path="motivating-case-study.html"><a href="motivating-case-study.html"><i class="fa fa-check"></i><b>3</b> Motivating Case Study</a><ul>
<li class="chapter" data-level="3.1" data-path="motivating-case-study.html"><a href="motivating-case-study.html#why-r"><i class="fa fa-check"></i><b>3.1</b> Why R?</a></li>
<li class="chapter" data-level="3.2" data-path="motivating-case-study.html"><a href="motivating-case-study.html#getting-started"><i class="fa fa-check"></i><b>3.2</b> Getting Started</a><ul>
<li class="chapter" data-level="3.2.1" data-path="motivating-case-study.html"><a href="motivating-case-study.html#installing-r"><i class="fa fa-check"></i><b>3.2.1</b> Installing R</a></li>
<li class="chapter" data-level="3.2.2" data-path="motivating-case-study.html"><a href="motivating-case-study.html#the-r-console"><i class="fa fa-check"></i><b>3.2.2</b> The R console</a></li>
<li class="chapter" data-level="3.2.3" data-path="motivating-case-study.html"><a href="motivating-case-study.html#scripts"><i class="fa fa-check"></i><b>3.2.3</b> Scripts</a></li>
<li class="chapter" data-level="3.2.4" data-path="motivating-case-study.html"><a href="motivating-case-study.html#installing-rstudio"><i class="fa fa-check"></i><b>3.2.4</b> Installing RStudio</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="motivating-case-study.html"><a href="motivating-case-study.html#the-r-ecosystem"><i class="fa fa-check"></i><b>3.3</b> The R ecosystem</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="the-very-basics.html"><a href="the-very-basics.html"><i class="fa fa-check"></i><b>4</b> The Very Basics</a><ul>
<li class="chapter" data-level="4.1" data-path="the-very-basics.html"><a href="the-very-basics.html#objects"><i class="fa fa-check"></i><b>4.1</b> Objects</a></li>
<li class="chapter" data-level="4.2" data-path="the-very-basics.html"><a href="the-very-basics.html#the-workspace"><i class="fa fa-check"></i><b>4.2</b> The Workspace</a></li>
<li class="chapter" data-level="4.3" data-path="the-very-basics.html"><a href="the-very-basics.html#functions"><i class="fa fa-check"></i><b>4.3</b> Functions</a></li>
<li class="chapter" data-level="4.4" data-path="the-very-basics.html"><a href="the-very-basics.html#other-prebuilt-objects"><i class="fa fa-check"></i><b>4.4</b> Other prebuilt objects</a></li>
<li class="chapter" data-level="4.5" data-path="the-very-basics.html"><a href="the-very-basics.html#variable-names"><i class="fa fa-check"></i><b>4.5</b> Variable names</a></li>
<li class="chapter" data-level="4.6" data-path="the-very-basics.html"><a href="the-very-basics.html#saving-your-workspace"><i class="fa fa-check"></i><b>4.6</b> Saving your workspace</a></li>
<li class="chapter" data-level="4.7" data-path="the-very-basics.html"><a href="the-very-basics.html#scripts-1"><i class="fa fa-check"></i><b>4.7</b> Scripts</a></li>
<li class="chapter" data-level="4.8" data-path="the-very-basics.html"><a href="the-very-basics.html#comments"><i class="fa fa-check"></i><b>4.8</b> Comments</a></li>
<li class="chapter" data-level="" data-path="the-very-basics.html"><a href="the-very-basics.html#exercises"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="data-types.html"><a href="data-types.html"><i class="fa fa-check"></i><b>5</b> Data types</a><ul>
<li class="chapter" data-level="5.1" data-path="data-types.html"><a href="data-types.html#data-frames"><i class="fa fa-check"></i><b>5.1</b> Data frames</a></li>
<li class="chapter" data-level="5.2" data-path="data-types.html"><a href="data-types.html#examining-an-object"><i class="fa fa-check"></i><b>5.2</b> Examining an object</a></li>
<li class="chapter" data-level="5.3" data-path="data-types.html"><a href="data-types.html#the-accessor"><i class="fa fa-check"></i><b>5.3</b> The accessor</a></li>
<li class="chapter" data-level="5.4" data-path="data-types.html"><a href="data-types.html#vectors-numerics-characters-and-logical"><i class="fa fa-check"></i><b>5.4</b> Vectors: numerics, characters, and logical</a></li>
<li class="chapter" data-level="5.5" data-path="data-types.html"><a href="data-types.html#factors"><i class="fa fa-check"></i><b>5.5</b> Factors</a></li>
<li class="chapter" data-level="5.6" data-path="data-types.html"><a href="data-types.html#lists"><i class="fa fa-check"></i><b>5.6</b> Lists</a></li>
<li class="chapter" data-level="" data-path="data-types.html"><a href="data-types.html#exercises-1"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="vectors.html"><a href="vectors.html"><i class="fa fa-check"></i><b>6</b> Vectors</a><ul>
<li class="chapter" data-level="6.1" data-path="vectors.html"><a href="vectors.html#creating-vectors"><i class="fa fa-check"></i><b>6.1</b> Creating vectors</a></li>
<li class="chapter" data-level="6.2" data-path="vectors.html"><a href="vectors.html#names"><i class="fa fa-check"></i><b>6.2</b> Names</a></li>
<li class="chapter" data-level="6.3" data-path="vectors.html"><a href="vectors.html#sequences"><i class="fa fa-check"></i><b>6.3</b> Sequences</a></li>
<li class="chapter" data-level="6.4" data-path="vectors.html"><a href="vectors.html#subsetting"><i class="fa fa-check"></i><b>6.4</b> Subsetting</a></li>
<li class="chapter" data-level="6.5" data-path="vectors.html"><a href="vectors.html#coercion"><i class="fa fa-check"></i><b>6.5</b> Coercion</a></li>
<li class="chapter" data-level="6.6" data-path="vectors.html"><a href="vectors.html#not-availables-na"><i class="fa fa-check"></i><b>6.6</b> Not Availables (NA)</a></li>
<li class="chapter" data-level="" data-path="vectors.html"><a href="vectors.html#exercises-2"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="sorting.html"><a href="sorting.html"><i class="fa fa-check"></i><b>7</b> Sorting</a><ul>
<li class="chapter" data-level="7.1" data-path="sorting.html"><a href="sorting.html#sort"><i class="fa fa-check"></i><b>7.1</b> <code>sort</code></a></li>
<li class="chapter" data-level="7.2" data-path="sorting.html"><a href="sorting.html#order"><i class="fa fa-check"></i><b>7.2</b> <code>order</code></a></li>
<li class="chapter" data-level="7.3" data-path="sorting.html"><a href="sorting.html#max-and-which.max"><i class="fa fa-check"></i><b>7.3</b> <code>max</code> and <code>which.max</code></a></li>
<li class="chapter" data-level="7.4" data-path="sorting.html"><a href="sorting.html#rank"><i class="fa fa-check"></i><b>7.4</b> <code>rank</code></a></li>
<li class="chapter" data-level="7.5" data-path="sorting.html"><a href="sorting.html#beware-of-recycling"><i class="fa fa-check"></i><b>7.5</b> Beware of recycling</a></li>
<li class="chapter" data-level="" data-path="sorting.html"><a href="sorting.html#exercise"><i class="fa fa-check"></i>Exercise</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="vector-arithmetics.html"><a href="vector-arithmetics.html"><i class="fa fa-check"></i><b>8</b> Vector arithmetics</a><ul>
<li class="chapter" data-level="8.1" data-path="vector-arithmetics.html"><a href="vector-arithmetics.html#rescaling"><i class="fa fa-check"></i><b>8.1</b> Rescaling</a></li>
<li class="chapter" data-level="8.2" data-path="vector-arithmetics.html"><a href="vector-arithmetics.html#two-vectors"><i class="fa fa-check"></i><b>8.2</b> Two vectors</a></li>
<li class="chapter" data-level="" data-path="vector-arithmetics.html"><a href="vector-arithmetics.html#exercises-3"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="indexing.html"><a href="indexing.html"><i class="fa fa-check"></i><b>9</b> Indexing</a><ul>
<li class="chapter" data-level="9.1" data-path="indexing.html"><a href="indexing.html#subsetting-with-logicals"><i class="fa fa-check"></i><b>9.1</b> Subsetting with logicals</a></li>
<li class="chapter" data-level="9.2" data-path="indexing.html"><a href="indexing.html#logical-operators"><i class="fa fa-check"></i><b>9.2</b> Logical operators</a></li>
<li class="chapter" data-level="9.3" data-path="indexing.html"><a href="indexing.html#which"><i class="fa fa-check"></i><b>9.3</b> <code>which</code></a></li>
<li class="chapter" data-level="9.4" data-path="indexing.html"><a href="indexing.html#match"><i class="fa fa-check"></i><b>9.4</b> <code>match</code></a></li>
<li class="chapter" data-level="9.5" data-path="indexing.html"><a href="indexing.html#in"><i class="fa fa-check"></i><b>9.5</b> <code>%in%</code></a></li>
<li class="chapter" data-level="" data-path="indexing.html"><a href="indexing.html#exercises-4"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="basic-data-wrangling.html"><a href="basic-data-wrangling.html"><i class="fa fa-check"></i><b>10</b> Basic Data Wrangling</a><ul>
<li class="chapter" data-level="10.1" data-path="basic-data-wrangling.html"><a href="basic-data-wrangling.html#adding-a-column-with-mutate"><i class="fa fa-check"></i><b>10.1</b> Adding a column with <code>mutate</code></a></li>
<li class="chapter" data-level="10.2" data-path="basic-data-wrangling.html"><a href="basic-data-wrangling.html#subsetting-with-filter"><i class="fa fa-check"></i><b>10.2</b> Subsetting with <code>filter</code></a></li>
<li class="chapter" data-level="10.3" data-path="basic-data-wrangling.html"><a href="basic-data-wrangling.html#selecting-columns-with-select"><i class="fa fa-check"></i><b>10.3</b> Selecting columns with <code>select</code></a></li>
<li class="chapter" data-level="10.4" data-path="basic-data-wrangling.html"><a href="basic-data-wrangling.html#the-pipe"><i class="fa fa-check"></i><b>10.4</b> The pipe: <code>%&gt;%</code></a></li>
<li class="chapter" data-level="10.5" data-path="basic-data-wrangling.html"><a href="basic-data-wrangling.html#creating-a-data-frame"><i class="fa fa-check"></i><b>10.5</b> Creating a data frame</a></li>
<li class="chapter" data-level="" data-path="basic-data-wrangling.html"><a href="basic-data-wrangling.html#exercises-5"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="basic-plots.html"><a href="basic-plots.html"><i class="fa fa-check"></i><b>11</b> Basic plots</a><ul>
<li class="chapter" data-level="11.1" data-path="basic-plots.html"><a href="basic-plots.html#scatter-plots"><i class="fa fa-check"></i><b>11.1</b> Scatter plots</a></li>
<li class="chapter" data-level="11.2" data-path="basic-plots.html"><a href="basic-plots.html#histograms"><i class="fa fa-check"></i><b>11.2</b> Histograms</a></li>
<li class="chapter" data-level="11.3" data-path="basic-plots.html"><a href="basic-plots.html#boxplot"><i class="fa fa-check"></i><b>11.3</b> Boxplot</a></li>
<li class="chapter" data-level="" data-path="basic-plots.html"><a href="basic-plots.html#exercises-6"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="importing-data.html"><a href="importing-data.html"><i class="fa fa-check"></i><b>12</b> Importing Data</a><ul>
<li class="chapter" data-level="" data-path="importing-data.html"><a href="importing-data.html#paths-and-the-working-directory"><i class="fa fa-check"></i>Paths and the working directory</a></li>
<li class="chapter" data-level="12.1" data-path="importing-data.html"><a href="importing-data.html#read.csv"><i class="fa fa-check"></i><b>12.1</b> <code>read.csv</code></a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="programming-basics.html"><a href="programming-basics.html"><i class="fa fa-check"></i><b>13</b> Programming basics</a><ul>
<li class="chapter" data-level="13.1" data-path="programming-basics.html"><a href="programming-basics.html#conditionals-expressions"><i class="fa fa-check"></i><b>13.1</b> Conditionals expressions</a></li>
<li class="chapter" data-level="13.2" data-path="programming-basics.html"><a href="programming-basics.html#defining-functions"><i class="fa fa-check"></i><b>13.2</b> Defining functions</a></li>
<li class="chapter" data-level="13.3" data-path="programming-basics.html"><a href="programming-basics.html#for-loops"><i class="fa fa-check"></i><b>13.3</b> For-loops</a></li>
<li class="chapter" data-level="13.4" data-path="programming-basics.html"><a href="programming-basics.html#vectorization-and-functionals"><i class="fa fa-check"></i><b>13.4</b> Vectorization and Functionals</a></li>
<li class="chapter" data-level="13.5" data-path="programming-basics.html"><a href="programming-basics.html#map"><i class="fa fa-check"></i><b>13.5</b> map</a></li>
<li class="chapter" data-level="13.6" data-path="programming-basics.html"><a href="programming-basics.html#other-functions"><i class="fa fa-check"></i><b>13.6</b> Other functions</a></li>
<li class="chapter" data-level="" data-path="programming-basics.html"><a href="programming-basics.html#exercises-7"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="matrices.html"><a href="matrices.html"><i class="fa fa-check"></i><b>14</b> Matrices</a><ul>
<li class="chapter" data-level="14.1" data-path="matrices.html"><a href="matrices.html#accessing-matrix-values"><i class="fa fa-check"></i><b>14.1</b> Accessing matrix values</a></li>
</ul></li>
<li class="part"><span><b>II Data Visualization</b></span></li>
<li class="chapter" data-level="15" data-path="introduction-2.html"><a href="introduction-2.html"><i class="fa fa-check"></i><b>15</b> Introduction</a></li>
<li class="chapter" data-level="16" data-path="data-types-1.html"><a href="data-types-1.html"><i class="fa fa-check"></i><b>16</b> Data types</a><ul>
<li class="chapter" data-level="" data-path="data-types-1.html"><a href="data-types-1.html#exercise-1"><i class="fa fa-check"></i>Exercise</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="distributions.html"><a href="distributions.html"><i class="fa fa-check"></i><b>17</b> Distributions</a><ul>
<li class="chapter" data-level="17.1" data-path="distributions.html"><a href="distributions.html#case-study-student-heights"><i class="fa fa-check"></i><b>17.1</b> Case study: student heights</a></li>
<li class="chapter" data-level="17.2" data-path="distributions.html"><a href="distributions.html#distribution-function"><i class="fa fa-check"></i><b>17.2</b> Distribution function</a></li>
<li class="chapter" data-level="17.3" data-path="distributions.html"><a href="distributions.html#cumulative-distribution-functions"><i class="fa fa-check"></i><b>17.3</b> Cumulative distribution functions</a></li>
<li class="chapter" data-level="17.4" data-path="distributions.html"><a href="distributions.html#histograms-1"><i class="fa fa-check"></i><b>17.4</b> Histograms</a></li>
<li class="chapter" data-level="17.5" data-path="distributions.html"><a href="distributions.html#smoothed-density"><i class="fa fa-check"></i><b>17.5</b> Smoothed density</a><ul>
<li class="chapter" data-level="" data-path="distributions.html"><a href="distributions.html#interpreting-the-y-axis"><i class="fa fa-check"></i>Interpreting the y-axis</a></li>
<li class="chapter" data-level="" data-path="distributions.html"><a href="distributions.html#densities-permit-stratification"><i class="fa fa-check"></i>Densities permit stratification</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="distributions.html"><a href="distributions.html#exercises-8"><i class="fa fa-check"></i>Exercises</a></li>
<li class="chapter" data-level="17.6" data-path="distributions.html"><a href="distributions.html#the-normal-distribution"><i class="fa fa-check"></i><b>17.6</b> The normal distribution</a><ul>
<li class="chapter" data-level="17.6.1" data-path="distributions.html"><a href="distributions.html#standardized-units"><i class="fa fa-check"></i><b>17.6.1</b> Standardized units</a></li>
<li class="chapter" data-level="17.6.2" data-path="distributions.html"><a href="distributions.html#quantile-quantile-qq-plots"><i class="fa fa-check"></i><b>17.6.2</b> Quantile-quantile QQ plots</a></li>
</ul></li>
<li class="chapter" data-level="17.7" data-path="distributions.html"><a href="distributions.html#percentiles"><i class="fa fa-check"></i><b>17.7</b> Percentiles</a></li>
<li class="chapter" data-level="17.8" data-path="distributions.html"><a href="distributions.html#case-study-coninued-summarizing-male-heights-with-two-numbers"><i class="fa fa-check"></i><b>17.8</b> Case study coninued: summarizing male heights with two numbers</a></li>
<li class="chapter" data-level="" data-path="distributions.html"><a href="distributions.html#exercises-9"><i class="fa fa-check"></i>Exercises</a></li>
<li class="chapter" data-level="17.9" data-path="distributions.html"><a href="distributions.html#boxplots"><i class="fa fa-check"></i><b>17.9</b> Boxplots</a></li>
<li class="chapter" data-level="17.10" data-path="distributions.html"><a href="distributions.html#case-study-continued-female-student-heights"><i class="fa fa-check"></i><b>17.10</b> Case study continued: female student heights</a></li>
</ul></li>
<li class="chapter" data-level="18" data-path="robust-summaries.html"><a href="robust-summaries.html"><i class="fa fa-check"></i><b>18</b> Robust summaries</a><ul>
<li class="chapter" data-level="18.1" data-path="robust-summaries.html"><a href="robust-summaries.html#outliers"><i class="fa fa-check"></i><b>18.1</b> Outliers</a></li>
<li class="chapter" data-level="18.2" data-path="robust-summaries.html"><a href="robust-summaries.html#median"><i class="fa fa-check"></i><b>18.2</b> Median</a></li>
<li class="chapter" data-level="18.3" data-path="robust-summaries.html"><a href="robust-summaries.html#the-inter-quartile-range-iqr"><i class="fa fa-check"></i><b>18.3</b> The inter quartile range (IQR)</a></li>
<li class="chapter" data-level="18.4" data-path="robust-summaries.html"><a href="robust-summaries.html#tukeys-definition-of-an-outlier"><i class="fa fa-check"></i><b>18.4</b> Tukey’s definition of an outlier</a></li>
<li class="chapter" data-level="18.5" data-path="robust-summaries.html"><a href="robust-summaries.html#median-absolute-deviation"><i class="fa fa-check"></i><b>18.5</b> Median absolute deviation</a></li>
<li class="chapter" data-level="" data-path="robust-summaries.html"><a href="robust-summaries.html#exercises-10"><i class="fa fa-check"></i>Exercises</a></li>
<li class="chapter" data-level="18.6" data-path="robust-summaries.html"><a href="robust-summaries.html#case-study-self-reported-heights"><i class="fa fa-check"></i><b>18.6</b> Case Study: self-reported heights</a></li>
</ul></li>
<li class="chapter" data-level="19" data-path="summarizing-data-with-dplyr.html"><a href="summarizing-data-with-dplyr.html"><i class="fa fa-check"></i><b>19</b> Summarizing data with dplyr</a><ul>
<li class="chapter" data-level="19.1" data-path="summarizing-data-with-dplyr.html"><a href="summarizing-data-with-dplyr.html#summarize"><i class="fa fa-check"></i><b>19.1</b> Summarize</a></li>
<li class="chapter" data-level="19.2" data-path="summarizing-data-with-dplyr.html"><a href="summarizing-data-with-dplyr.html#the-dot-operator"><i class="fa fa-check"></i><b>19.2</b> The dot operator</a></li>
<li class="chapter" data-level="19.3" data-path="summarizing-data-with-dplyr.html"><a href="summarizing-data-with-dplyr.html#group-then-summarize"><i class="fa fa-check"></i><b>19.3</b> Group then summarize</a></li>
<li class="chapter" data-level="19.4" data-path="summarizing-data-with-dplyr.html"><a href="summarizing-data-with-dplyr.html#sorting-data-tables"><i class="fa fa-check"></i><b>19.4</b> Sorting data tables</a><ul>
<li class="chapter" data-level="" data-path="summarizing-data-with-dplyr.html"><a href="summarizing-data-with-dplyr.html#nested-sorting"><i class="fa fa-check"></i>Nested sorting</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="summarizing-data-with-dplyr.html"><a href="summarizing-data-with-dplyr.html#exercises-11"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="20" data-path="ggplot2.html"><a href="ggplot2.html"><i class="fa fa-check"></i><b>20</b> ggplot2</a><ul>
<li class="chapter" data-level="20.1" data-path="ggplot2.html"><a href="ggplot2.html#the-cheat-sheet"><i class="fa fa-check"></i><b>20.1</b> The cheat sheet</a></li>
<li class="chapter" data-level="20.2" data-path="ggplot2.html"><a href="ggplot2.html#the-components-of-a-graph"><i class="fa fa-check"></i><b>20.2</b> The components of a graph</a></li>
<li class="chapter" data-level="20.3" data-path="ggplot2.html"><a href="ggplot2.html#ggplot-objects-a-blank-slate"><i class="fa fa-check"></i><b>20.3</b> <code>ggplot</code> objects: a blank slate</a></li>
<li class="chapter" data-level="20.4" data-path="ggplot2.html"><a href="ggplot2.html#geometries"><i class="fa fa-check"></i><b>20.4</b> Geometries</a></li>
<li class="chapter" data-level="20.5" data-path="ggplot2.html"><a href="ggplot2.html#aesthetic-mappings"><i class="fa fa-check"></i><b>20.5</b> Aesthetic mappings</a></li>
<li class="chapter" data-level="20.6" data-path="ggplot2.html"><a href="ggplot2.html#layers"><i class="fa fa-check"></i><b>20.6</b> Layers</a></li>
<li class="chapter" data-level="20.7" data-path="ggplot2.html"><a href="ggplot2.html#tinkering-with-arguments"><i class="fa fa-check"></i><b>20.7</b> Tinkering with arguments</a></li>
<li class="chapter" data-level="20.8" data-path="ggplot2.html"><a href="ggplot2.html#global-versus-local-aesthetic-mappings"><i class="fa fa-check"></i><b>20.8</b> Global versus local aesthetic mappings</a></li>
<li class="chapter" data-level="20.9" data-path="ggplot2.html"><a href="ggplot2.html#scales"><i class="fa fa-check"></i><b>20.9</b> Scales</a></li>
<li class="chapter" data-level="20.10" data-path="ggplot2.html"><a href="ggplot2.html#labels-and-titles"><i class="fa fa-check"></i><b>20.10</b> Labels and titles</a></li>
<li class="chapter" data-level="20.11" data-path="ggplot2.html"><a href="ggplot2.html#categories-as-colors"><i class="fa fa-check"></i><b>20.11</b> Categories as colors</a></li>
<li class="chapter" data-level="20.12" data-path="ggplot2.html"><a href="ggplot2.html#annotation-and-shapes"><i class="fa fa-check"></i><b>20.12</b> Annotation and shapes</a></li>
<li class="chapter" data-level="20.13" data-path="ggplot2.html"><a href="ggplot2.html#adjustments"><i class="fa fa-check"></i><b>20.13</b> Adjustments</a></li>
<li class="chapter" data-level="20.14" data-path="ggplot2.html"><a href="ggplot2.html#add-on-packages"><i class="fa fa-check"></i><b>20.14</b> Add-on packages</a></li>
<li class="chapter" data-level="20.15" data-path="ggplot2.html"><a href="ggplot2.html#putting-it-all-together"><i class="fa fa-check"></i><b>20.15</b> Putting it all together</a></li>
<li class="chapter" data-level="20.16" data-path="ggplot2.html"><a href="ggplot2.html#other-geometries"><i class="fa fa-check"></i><b>20.16</b> Other geometries</a><ul>
<li class="chapter" data-level="" data-path="ggplot2.html"><a href="ggplot2.html#histogram"><i class="fa fa-check"></i>Histogram</a></li>
<li class="chapter" data-level="" data-path="ggplot2.html"><a href="ggplot2.html#density"><i class="fa fa-check"></i>Density</a></li>
<li class="chapter" data-level="" data-path="ggplot2.html"><a href="ggplot2.html#qq-plots"><i class="fa fa-check"></i>QQ-plots</a></li>
</ul></li>
<li class="chapter" data-level="20.17" data-path="ggplot2.html"><a href="ggplot2.html#grids-of-plots"><i class="fa fa-check"></i><b>20.17</b> Grids of plots</a></li>
</ul></li>
<li class="chapter" data-level="21" data-path="case-study-trends-in-world-health-and-economics.html"><a href="case-study-trends-in-world-health-and-economics.html"><i class="fa fa-check"></i><b>21</b> Case study: trends in world health and economics</a><ul>
<li class="chapter" data-level="21.1" data-path="case-study-trends-in-world-health-and-economics.html"><a href="case-study-trends-in-world-health-and-economics.html#example-1-life-expectancy-and-fertility-rates"><i class="fa fa-check"></i><b>21.1</b> Example 1: Life expectancy and fertility rates</a><ul>
<li class="chapter" data-level="" data-path="case-study-trends-in-world-health-and-economics.html"><a href="case-study-trends-in-world-health-and-economics.html#hans-roslings-quiz"><i class="fa fa-check"></i>Hans Rosling’s quiz</a></li>
<li class="chapter" data-level="" data-path="case-study-trends-in-world-health-and-economics.html"><a href="case-study-trends-in-world-health-and-economics.html#a-scatterplot"><i class="fa fa-check"></i>A scatterplot</a></li>
</ul></li>
<li class="chapter" data-level="21.2" data-path="case-study-trends-in-world-health-and-economics.html"><a href="case-study-trends-in-world-health-and-economics.html#faceting"><i class="fa fa-check"></i><b>21.2</b> Faceting</a><ul>
<li><a href="case-study-trends-in-world-health-and-economics.html#facet_wrap"><code>facet_wrap</code></a></li>
</ul></li>
<li class="chapter" data-level="21.3" data-path="case-study-trends-in-world-health-and-economics.html"><a href="case-study-trends-in-world-health-and-economics.html#fixed-scales-for-better-comparisons"><i class="fa fa-check"></i><b>21.3</b> Fixed scales for better comparisons</a></li>
<li class="chapter" data-level="21.4" data-path="case-study-trends-in-world-health-and-economics.html"><a href="case-study-trends-in-world-health-and-economics.html#time-series-plots"><i class="fa fa-check"></i><b>21.4</b> Time series plots</a></li>
<li class="chapter" data-level="21.5" data-path="case-study-trends-in-world-health-and-economics.html"><a href="case-study-trends-in-world-health-and-economics.html#labels-for-legends"><i class="fa fa-check"></i><b>21.5</b> Labels for legends</a></li>
<li class="chapter" data-level="21.6" data-path="case-study-trends-in-world-health-and-economics.html"><a href="case-study-trends-in-world-health-and-economics.html#example-2-income-distribution"><i class="fa fa-check"></i><b>21.6</b> Example 2: Income distribution</a></li>
<li class="chapter" data-level="21.7" data-path="case-study-trends-in-world-health-and-economics.html"><a href="case-study-trends-in-world-health-and-economics.html#transformations"><i class="fa fa-check"></i><b>21.7</b> Transformations</a><ul>
<li class="chapter" data-level="" data-path="case-study-trends-in-world-health-and-economics.html"><a href="case-study-trends-in-world-health-and-economics.html#country-income-distribution"><i class="fa fa-check"></i>Country income distribution</a></li>
<li class="chapter" data-level="" data-path="case-study-trends-in-world-health-and-economics.html"><a href="case-study-trends-in-world-health-and-economics.html#which-base"><i class="fa fa-check"></i>Which base?</a></li>
<li class="chapter" data-level="" data-path="case-study-trends-in-world-health-and-economics.html"><a href="case-study-trends-in-world-health-and-economics.html#transform-the-values-or-the-scale"><i class="fa fa-check"></i>Transform the values or the scale?</a></li>
<li class="chapter" data-level="" data-path="case-study-trends-in-world-health-and-economics.html"><a href="case-study-trends-in-world-health-and-economics.html#modes"><i class="fa fa-check"></i>Modes</a></li>
</ul></li>
<li class="chapter" data-level="21.8" data-path="case-study-trends-in-world-health-and-economics.html"><a href="case-study-trends-in-world-health-and-economics.html#stratify-and-boxplot"><i class="fa fa-check"></i><b>21.8</b> Stratify and boxplot</a><ul>
<li class="chapter" data-level="" data-path="case-study-trends-in-world-health-and-economics.html"><a href="case-study-trends-in-world-health-and-economics.html#do-not-order-alphabetically"><i class="fa fa-check"></i>Do not order alphabetically</a></li>
<li class="chapter" data-level="" data-path="case-study-trends-in-world-health-and-economics.html"><a href="case-study-trends-in-world-health-and-economics.html#show-the-data"><i class="fa fa-check"></i>Show the data</a></li>
</ul></li>
<li class="chapter" data-level="21.9" data-path="case-study-trends-in-world-health-and-economics.html"><a href="case-study-trends-in-world-health-and-economics.html#comparing-distributions"><i class="fa fa-check"></i><b>21.9</b> Comparing distributions</a><ul>
<li class="chapter" data-level="" data-path="case-study-trends-in-world-health-and-economics.html"><a href="case-study-trends-in-world-health-and-economics.html#density-plots"><i class="fa fa-check"></i>Density plots</a></li>
<li class="chapter" data-level="" data-path="case-study-trends-in-world-health-and-economics.html"><a href="case-study-trends-in-world-health-and-economics.html#accessing-computed-variables"><i class="fa fa-check"></i>Accessing computed variables</a></li>
<li class="chapter" data-level="21.9.1" data-path="case-study-trends-in-world-health-and-economics.html"><a href="case-study-trends-in-world-health-and-economics.html#case_when"><i class="fa fa-check"></i><b>21.9.1</b> ‘case_when’</a></li>
<li class="chapter" data-level="" data-path="case-study-trends-in-world-health-and-economics.html"><a href="case-study-trends-in-world-health-and-economics.html#weighted-densities"><i class="fa fa-check"></i>Weighted densities</a></li>
</ul></li>
<li class="chapter" data-level="21.10" data-path="case-study-trends-in-world-health-and-economics.html"><a href="case-study-trends-in-world-health-and-economics.html#ecological-fallacy"><i class="fa fa-check"></i><b>21.10</b> Ecological fallacy</a><ul>
<li class="chapter" data-level="" data-path="case-study-trends-in-world-health-and-economics.html"><a href="case-study-trends-in-world-health-and-economics.html#logistic-transformation"><i class="fa fa-check"></i>Logistic transformation</a></li>
<li class="chapter" data-level="" data-path="case-study-trends-in-world-health-and-economics.html"><a href="case-study-trends-in-world-health-and-economics.html#show-the-data-1"><i class="fa fa-check"></i>Show the data</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="22" data-path="data-visualization-principles.html"><a href="data-visualization-principles.html"><i class="fa fa-check"></i><b>22</b> Data visualization principles</a><ul>
<li class="chapter" data-level="22.1" data-path="data-visualization-principles.html"><a href="data-visualization-principles.html#encoding-data-using-visual-cues"><i class="fa fa-check"></i><b>22.1</b> Encoding data using visual cues</a></li>
<li class="chapter" data-level="22.2" data-path="data-visualization-principles.html"><a href="data-visualization-principles.html#know-when-to-include-0"><i class="fa fa-check"></i><b>22.2</b> Know when to include 0</a></li>
<li class="chapter" data-level="22.3" data-path="data-visualization-principles.html"><a href="data-visualization-principles.html#do-not-distort-quantities"><i class="fa fa-check"></i><b>22.3</b> Do not distort quantities</a></li>
<li class="chapter" data-level="22.4" data-path="data-visualization-principles.html"><a href="data-visualization-principles.html#order-by-a-meaningful-value"><i class="fa fa-check"></i><b>22.4</b> Order by a meaningful value</a></li>
<li class="chapter" data-level="22.5" data-path="data-visualization-principles.html"><a href="data-visualization-principles.html#show-the-data-2"><i class="fa fa-check"></i><b>22.5</b> Show the data</a></li>
<li class="chapter" data-level="22.6" data-path="data-visualization-principles.html"><a href="data-visualization-principles.html#ease-comparisons-use-common-axes"><i class="fa fa-check"></i><b>22.6</b> Ease comparisons: use common axes</a></li>
<li class="chapter" data-level="22.7" data-path="data-visualization-principles.html"><a href="data-visualization-principles.html#ease-comparisons-align-plots-vertically-to-see-horizontal-changes-and-horizontally-to-see-vertical-changes"><i class="fa fa-check"></i><b>22.7</b> Ease comparisons: align plots vertically to see horizontal changes and horizontally to see vertical changes</a></li>
<li class="chapter" data-level="22.8" data-path="data-visualization-principles.html"><a href="data-visualization-principles.html#consider-transformations"><i class="fa fa-check"></i><b>22.8</b> Consider transformations</a></li>
<li class="chapter" data-level="22.9" data-path="data-visualization-principles.html"><a href="data-visualization-principles.html#ease-comparisons-visual-cues-to-be-compared-should-be-adjacent."><i class="fa fa-check"></i><b>22.9</b> Ease comparisons: Visual cues to be compared should be adjacent.</a></li>
<li class="chapter" data-level="22.10" data-path="data-visualization-principles.html"><a href="data-visualization-principles.html#ease-comparison-use-color"><i class="fa fa-check"></i><b>22.10</b> Ease comparison: use color</a></li>
<li class="chapter" data-level="22.11" data-path="data-visualization-principles.html"><a href="data-visualization-principles.html#think-of-the-color-blind"><i class="fa fa-check"></i><b>22.11</b> Think of the color blind</a></li>
<li class="chapter" data-level="22.12" data-path="data-visualization-principles.html"><a href="data-visualization-principles.html#use-scatter-plots-to-examine-the-relationship-between-two-variables"><i class="fa fa-check"></i><b>22.12</b> Use scatter plots to examine the relationship between two variables</a><ul>
<li class="chapter" data-level="22.12.1" data-path="data-visualization-principles.html"><a href="data-visualization-principles.html#slope-charts"><i class="fa fa-check"></i><b>22.12.1</b> Slope charts</a></li>
<li class="chapter" data-level="22.12.2" data-path="data-visualization-principles.html"><a href="data-visualization-principles.html#bland-altman-plot"><i class="fa fa-check"></i><b>22.12.2</b> Bland-Altman plot</a></li>
</ul></li>
<li class="chapter" data-level="22.13" data-path="data-visualization-principles.html"><a href="data-visualization-principles.html#encoding-a-third-variable"><i class="fa fa-check"></i><b>22.13</b> Encoding a third variable</a></li>
<li class="chapter" data-level="22.14" data-path="data-visualization-principles.html"><a href="data-visualization-principles.html#avoid-pseudo-three-dimensional-plots"><i class="fa fa-check"></i><b>22.14</b> Avoid pseudo three dimensional plots</a></li>
<li class="chapter" data-level="22.15" data-path="data-visualization-principles.html"><a href="data-visualization-principles.html#avoid-gratuitous-three-dimensional-plots"><i class="fa fa-check"></i><b>22.15</b> Avoid gratuitous three dimensional plots</a></li>
<li class="chapter" data-level="22.16" data-path="data-visualization-principles.html"><a href="data-visualization-principles.html#avoid-too-many-significant-digits"><i class="fa fa-check"></i><b>22.16</b> Avoid too many significant digits</a></li>
<li class="chapter" data-level="22.17" data-path="data-visualization-principles.html"><a href="data-visualization-principles.html#further-reading"><i class="fa fa-check"></i><b>22.17</b> Further reading:</a></li>
<li class="chapter" data-level="" data-path="data-visualization-principles.html"><a href="data-visualization-principles.html#exercises-12"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="23" data-path="case-study-the-impact-of-vaccines-on-battling-infectious-diseases.html"><a href="case-study-the-impact-of-vaccines-on-battling-infectious-diseases.html"><i class="fa fa-check"></i><b>23</b> Case study: the impact of vaccines on battling infectious diseases</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Introduction to Data Science</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="robust-summaries" class="section level1">
<h1><span class="header-section-number">Chapter 18</span> Robust summaries</h1>
<div id="outliers" class="section level2">
<h2><span class="header-section-number">18.1</span> Outliers</h2>
<p>We previously described how boxplots show <em>outliers</em>, but we did not provide a precise definition. Here we discuss outliers, approaches that can help detect them, and summaries that take into account their presence.</p>
<p>Outliers are very common in data science. Data recording can be complex and it is common to observe data points generated in error. For example, an old monitoring device may read out nonsensical measurements before completely failing. Human error is also a source of outliers, in particular when data entry is done manually. For instance, an individual may mistakenly enter their height in centimeters instead of inches.</p>
<p>Now, how do we distinguish an outlier from measurements that were too big or too small simply due to expected variability? This is not always an easy question to answer, but we try to provide some guidance. Let’s begin with a simple case.</p>
<p>Suppose a colleague is charged with collecting demography data for a group of males. The data is stored in the object:</p>
<pre><code>#&gt;  num [1:500] 5.59 5.8 5.54 6.15 5.83 5.54 5.87 5.93 5.89 5.67 ...</code></pre>
<p>Our colleague uses the fact that heights are usually well approximated by a normal distribution and summarizes the data with average and standard deviation:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mean</span>(outlier_example)
<span class="co">#&gt; [1] 6.1</span>
<span class="kw">sd</span>(outlier_example)
<span class="co">#&gt; [1] 7.8</span></code></pre></div>
<p>and writes a report on the interesting fact that this group of males is much taller than usual. The average height is over six feet tall! Using your data science skills, however, you notice something else that is unexpected: the standard deviation is over 7 inches. Adding and subtracting two standard deviations, you note that 95% of this population will have heights between -9.489, 21.697 inches which does not make sense.</p>
<p>A quick plot reveals the problem:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">hist</span>(outlier_example)</code></pre></div>
<p><img src="book_files/figure-html/histogram-reveals-outliers-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>There appears to be at least one value that is nonsensical, since we know that a height of 180 feet is impossible. The boxplot detects this point as an outlier:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">boxplot</span>(outlier_example)</code></pre></div>
<p><img src="book_files/figure-html/boxplot-reveals-outliers-1.png" width="70%" style="display: block; margin: auto;" /></p>
</div>
<div id="median" class="section level2">
<h2><span class="header-section-number">18.2</span> Median</h2>
<p>When we have an outlier like this, the average can become very large. Keep in mind that mathematically we can make the average as large as we want by simply changing one number: with 500 data points, we can increase the average by any amount <span class="math inline">\(\Delta\)</span> by adding <span class="math inline">\(\Delta \times\)</span> 500 to a single number. The median, defined as the value for which half the values are smaller and the other half are bigger, is robust to such outliers. No matter how large we make the largest point, the median remains the same.</p>
<p>With this data the median is:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">median</span>(outlier_example)
<span class="co">#&gt; [1] 5.74</span></code></pre></div>
<p>which is about 5 feet and 9 inches.</p>
<p>The median is what boxplots display as a horizontal line.</p>
</div>
<div id="the-inter-quartile-range-iqr" class="section level2">
<h2><span class="header-section-number">18.3</span> The inter quartile range (IQR)</h2>
<p>The box in boxplots are defined by the first and third quartile. These are meant to provide an idea of the variability in the data: 50% of the data is within this range. The difference between the 3rd and 1st quartile (or 75th and 25th percentiles) is referred to as the inter quartile range (IQR). As is the case with the median, this quantity will be robust to outliers as large values do not affect it. We can do some math to see that for normal data the IQR / 1.349 approximates the standard deviation of the data had an outlier not been present. We can see that this works well in our example since we get a standard deviation estimate of:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">IQR</span>(outlier_example) <span class="op">/</span><span class="st"> </span><span class="fl">1.349</span>
<span class="co">#&gt; [1] 0.245</span></code></pre></div>
<p>which is about 3 inches.</p>
</div>
<div id="tukeys-definition-of-an-outlier" class="section level2">
<h2><span class="header-section-number">18.4</span> Tukey’s definition of an outlier</h2>
<p>In R, points falling outside the whiskers of the boxplot are referred to as <em>outliers</em>. This definition of outlier was introduced by Tukey. The top whisker ends at the 75th percentile plus 1.5 <span class="math inline">\(\times\)</span> IQR. Similarly the bottom whisker ends at the 25th percentile minus 1.5<span class="math inline">\(\times\)</span> IQR. If we define the first and third quartiles as <span class="math inline">\(Q_1\)</span> and <span class="math inline">\(Q_3\)</span> respectively, then an outlier is anything outside the range:</p>
<p><span class="math display">\[[Q_1 - 1.5 \times (Q_3 - Q1), Q_3 + 1.5 \times (Q_3 - Q1)]\]</span>.</p>
<p>When the data is normally distributed. the standard units of these values are:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">q3 &lt;-<span class="st"> </span><span class="kw">qnorm</span>(<span class="fl">0.75</span>)
q1 &lt;-<span class="st"> </span><span class="kw">qnorm</span>(<span class="fl">0.25</span>)
iqr &lt;-<span class="st"> </span>q3 <span class="op">-</span><span class="st"> </span>q1
r &lt;-<span class="st"> </span><span class="kw">c</span>(q1 <span class="op">-</span><span class="st"> </span><span class="fl">1.5</span><span class="op">*</span>iqr, q3 <span class="op">+</span><span class="st"> </span><span class="fl">1.5</span><span class="op">*</span>iqr)
r
<span class="co">#&gt; [1] -2.7  2.7</span></code></pre></div>
<p>Using the <code>pnorm</code> function we see that 99.3% of the data falls in this interval.</p>
<p>Keep in mind that this is not such an extreme event: if we have 1000 data points that are randomly distributed, we expect to see about 7 outside of this range. But these would not be outliers since we expect to see them under the typical variation.</p>
<p>If we want an outlier to be rarer, we can increase the 1.5 to a larger number. Tukey also used 3 and called these <em>far out</em> outliers. With a normal distribution 100% of the data falls in this interval. This translates into about 1 in a million chance of being outside the range. In the <code>geom_boxplot</code> function this can be controlled by the <code>outlier.size</code> argument, which defaults to 1.5.</p>
<p>The 180 feet measurement is well beyond the range of the height data:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">max_height &lt;-<span class="st"> </span><span class="kw">quantile</span>(outlier_example, <span class="fl">0.75</span>) <span class="op">+</span><span class="st"> </span><span class="dv">3</span><span class="op">*</span><span class="kw">IQR</span>(outlier_example)</code></pre></div>
<p>If we take this value out, we can see that the data is in fact normally distributed as expected:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span>outlier_example[outlier_example <span class="op">&lt;</span><span class="st"> </span>max_height]
<span class="kw">qqnorm</span>(x)
<span class="kw">qqline</span>(x)</code></pre></div>
<p><img src="book_files/figure-html/outlier-qqnorm-1.png" width="70%" style="display: block; margin: auto;" /></p>
</div>
<div id="median-absolute-deviation" class="section level2">
<h2><span class="header-section-number">18.5</span> Median absolute deviation</h2>
<p>Another way to estimate the standard deviation in the presence of outliers is to use the median absolute deviation (MAD). To compute the MAD, we first compute the median, and then for each value we compute the distance between that value and the median. The MAD is defined as the median of these distances. For technical reasons not discussed here, this quantity needs to be multiplied by 1.4826 to assure it approximates the actual standard deviation. The <code>mad</code> function already incorporates this correction. For the height data we get a MAD of:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mad</span>(outlier_example)
<span class="co">#&gt; [1] 0.237</span></code></pre></div>
<p>which is about 3 inches.</p>
</div>
<div id="exercises-10" class="section level2 unnumbered">
<h2>Exercises</h2>
<p>Load the height data set and create a vector <code>x</code> with just the male heights used in Galton’s data on the heights of parents and their children from his historic research on heredity.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">##You can install data like this: install.packages(&quot;HistData&quot;)
<span class="kw">library</span>(HistData)
<span class="kw">data</span>(Galton)
x &lt;-<span class="st"> </span>Galton<span class="op">$</span>child</code></pre></div>
<ol style="list-style-type: decimal">
<li><p>Compute the average and median of these data.</p></li>
<li><p>Compute the median and median absolute deviation of these data.</p></li>
<li><p>Now suppose Galton made a mistake when entering the first value, forgetting to use the decimal point. You can imitate this error by typing:</p></li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x_with_error &lt;-<span class="st"> </span>x
x_with_error[<span class="dv">1</span>] &lt;-<span class="st"> </span>x_with_error[<span class="dv">1</span>]<span class="op">*</span><span class="dv">10</span></code></pre></div>
<pre><code>How many inches does the average grow after this mistake?</code></pre>
<ol start="4" style="list-style-type: decimal">
<li><p>How many inches does the SD grow after this mistake?</p></li>
<li><p>How many inches does the median grow after this mistake?</p></li>
<li><p>How many inches does the MAD grow after this mistake?</p></li>
<li><p>How could you use exploratory data analysis to detect that an error was made?</p></li>
</ol>
<p>A. Since it is only one value out of many, we will not be able to detect this. B. We would see an obvious shift in the distribution. C. A boxplot, histogram, or qq-plot would reveal a clear outlier. D. A scatter plot would show high levels of measurement error.</p>
<ol start="8" style="list-style-type: decimal">
<li>How much can the average accidentally grow with mistakes like this? Write a function called <code>error_avg</code> that takes a value <code>k</code> and returns the average of the vector <code>x</code> after the first entry changed to <code>k</code>. Show the results for <code>k=10000</code> and <code>k=-10000</code>.</li>
</ol>
</div>
<div id="case-study-self-reported-heights" class="section level2">
<h2><span class="header-section-number">18.6</span> Case Study: self-reported heights</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">data</span>(reported_heights)
<span class="kw">str</span>(reported_heights)
<span class="co">#&gt; &#39;data.frame&#39;:    1095 obs. of  3 variables:</span>
<span class="co">#&gt;  $ time_stamp: chr  &quot;2014-09-02 13:40:36&quot; &quot;2014-09-02 13:46:59&quot; &quot;2014-09-02 13:59:20&quot; &quot;2014-09-02 14:51:53&quot; ...</span>
<span class="co">#&gt;  $ sex       : chr  &quot;Male&quot; &quot;Male&quot; &quot;Male&quot; &quot;Male&quot; ...</span>
<span class="co">#&gt;  $ height    : chr  &quot;75&quot; &quot;70&quot; &quot;68&quot; &quot;74&quot; ...</span></code></pre></div>
<p>Height is a character vector so we create a new column with the numeric version:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">reported_heights &lt;-<span class="st"> </span>reported_heights <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">original_heights =</span> height, <span class="dt">height =</span> <span class="kw">as.numeric</span>(height))</code></pre></div>
<p>We get a warning about NAs. This is because some of the self reported heights were not numbers. We can see why we get these:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">reported_heights <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(<span class="kw">is.na</span>(height)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">head</span>()
<span class="co">#&gt;            time_stamp    sex height original_heights</span>
<span class="co">#&gt; 1 2014-09-02 15:16:28   Male     NA            5&#39; 4&quot;</span>
<span class="co">#&gt; 2 2014-09-02 15:16:37 Female     NA            165cm</span>
<span class="co">#&gt; 3 2014-09-02 15:16:52   Male     NA              5&#39;7</span>
<span class="co">#&gt; 4 2014-09-02 15:16:56   Male     NA            &gt;9000</span>
<span class="co">#&gt; 5 2014-09-02 15:16:56   Male     NA             5&#39;7&quot;</span>
<span class="co">#&gt; 6 2014-09-02 15:17:09 Female     NA             5&#39;3&quot;</span></code></pre></div>
<p>Some students self reported their heights using feet and inches rather than just inches. Others used centimeters and others were just trolling. For now we will remove these entries:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">reported_heights &lt;-<span class="st"> </span><span class="kw">filter</span>(reported_heights, <span class="op">!</span><span class="kw">is.na</span>(height))</code></pre></div>
<p>If we compute the average and standard deviation, we notice that we obtain strange results. The average and standard deviation are different from the median and MAS:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">reported_heights <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">group_by</span>(sex) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarize</span>(<span class="dt">average =</span> <span class="kw">mean</span>(height), <span class="dt">sd =</span> <span class="kw">sd</span>(height),
            <span class="dt">median =</span> <span class="kw">median</span>(height), <span class="dt">MAD =</span> <span class="kw">mad</span>(height))
<span class="co">#&gt; # A tibble: 2 x 5</span>
<span class="co">#&gt;      sex average    sd median   MAD</span>
<span class="co">#&gt;    &lt;chr&gt;   &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co">#&gt; 1 Female    63.4  27.9   64.2  4.05</span>
<span class="co">#&gt; 2   Male   103.4 529.9   70.0  4.45</span></code></pre></div>
<p>This suggests that we have outliers, which is confirmed by simply creating a boxplot:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">reported_heights <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(sex, height)) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_boxplot</span>()</code></pre></div>
<p><img src="book_files/figure-html/height-outlier-ggplot-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>We can see some rather extreme values. To see what these values are, we can quickly look at the largest values using the <code>arrange</code> function:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">reported_heights <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(height)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">top_n</span>(<span class="dv">10</span>, height)
<span class="co">#&gt;             time_stamp    sex height original_heights</span>
<span class="co">#&gt; 1  2014-09-03 23:55:37   Male  11111            11111</span>
<span class="co">#&gt; 2  2016-04-10 22:45:49   Male  10000            10000</span>
<span class="co">#&gt; 3  2015-08-10 03:10:01   Male    684              684</span>
<span class="co">#&gt; 4  2015-02-27 18:05:06   Male    612              612</span>
<span class="co">#&gt; 5  2014-09-02 15:16:41   Male    511              511</span>
<span class="co">#&gt; 6  2014-09-07 20:53:43   Male    300              300</span>
<span class="co">#&gt; 7  2014-11-28 12:18:40   Male    214              214</span>
<span class="co">#&gt; 8  2017-04-03 16:16:57   Male    210              210</span>
<span class="co">#&gt; 9  2015-11-24 10:39:45   Male    192              192</span>
<span class="co">#&gt; 10 2014-12-26 10:00:12   Male    190              190</span>
<span class="co">#&gt; 11 2016-11-06 10:21:02 Female    190              190</span></code></pre></div>
<p>The first seven entries look like strange errors. However, the next few look like they were entered as centimeters instead of inches. Since 184 cm is equivalent to six feet tall, we suspect that 184 was actually meant to be 72 inches.</p>
<p>We can review all the nonsensical answers by looking at the data considered to be <em>far out</em> by Tukey:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">max_height &lt;-<span class="st"> </span><span class="kw">quantile</span>(reported_heights<span class="op">$</span>height, .<span class="dv">75</span>) <span class="op">+</span><span class="st"> </span><span class="dv">3</span><span class="op">*</span><span class="kw">IQR</span>(reported_heights<span class="op">$</span>height)
min_height &lt;-<span class="st"> </span><span class="kw">quantile</span>(reported_heights<span class="op">$</span>height, .<span class="dv">25</span>) <span class="op">-</span><span class="st"> </span><span class="dv">3</span><span class="op">*</span><span class="kw">IQR</span>(reported_heights<span class="op">$</span>height)
<span class="kw">c</span>(min_height, max_height )
<span class="co">#&gt; 25% 75% </span>
<span class="co">#&gt;  44  93</span></code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">outliers &lt;-<span class="st"> </span>reported_heights <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">between</span>(height, min_height, max_height)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">arrange</span>(height)
outliers<span class="op">$</span>height
<span class="co">#&gt;   [1]     0.00     0.70     1.00     1.00     1.00     1.60     1.70</span>
<span class="co">#&gt;   [8]     2.00     5.00     5.00     5.00     5.00     5.10     5.10</span>
<span class="co">#&gt;  [15]     5.10     5.10     5.11     5.11     5.11     5.11     5.20</span>
<span class="co">#&gt;  [22]     5.20     5.20     5.25     5.25     5.30     5.40     5.40</span>
<span class="co">#&gt;  [29]     5.50     5.50     5.50     5.50     5.50     5.50     5.50</span>
<span class="co">#&gt;  [36]     5.50     5.50     5.50     5.50     5.51     5.57     5.60</span>
<span class="co">#&gt;  [43]     5.60     5.60     5.60     5.60     5.60     5.60     5.69</span>
<span class="co">#&gt;  [50]     5.70     5.70     5.70     5.70     5.70     5.70     5.70</span>
<span class="co">#&gt;  [57]     5.75     5.80     5.80     5.80     5.80     5.80     5.90</span>
<span class="co">#&gt;  [64]     5.90     5.90     5.90     6.00     6.00     6.00     6.00</span>
<span class="co">#&gt;  [71]     6.00     6.00     6.00     6.00     6.00     6.00     6.00</span>
<span class="co">#&gt;  [78]     6.00     6.00     6.00     6.00     6.00     6.00     6.00</span>
<span class="co">#&gt;  [85]     6.00     6.10     6.10     6.20     6.20     6.30     6.50</span>
<span class="co">#&gt;  [92]     6.50     6.50     6.70     7.00    12.00    19.00    22.00</span>
<span class="co">#&gt;  [99]    23.00    25.00    34.00    34.00   100.00   103.20   111.00</span>
<span class="co">#&gt; [106]   120.00   120.00   150.00   150.00   152.00   157.00   157.00</span>
<span class="co">#&gt; [113]   158.00   158.00   158.00   159.00   160.00   160.00   161.00</span>
<span class="co">#&gt; [120]   162.00   162.00   162.00   163.00   164.00   164.00   165.00</span>
<span class="co">#&gt; [127]   165.00   165.00   167.00   167.00   167.00   168.00   168.00</span>
<span class="co">#&gt; [134]   168.00   168.00   169.00   169.00   169.00   169.00   170.00</span>
<span class="co">#&gt; [141]   170.00   170.00   170.00   170.00   170.00   170.00   170.00</span>
<span class="co">#&gt; [148]   170.00   172.00   172.00   172.00   172.00   172.00   172.00</span>
<span class="co">#&gt; [155]   172.00   173.00   173.00   173.00   174.00   174.00   174.00</span>
<span class="co">#&gt; [162]   174.00   175.00   175.00   175.00   175.00   175.00   176.00</span>
<span class="co">#&gt; [169]   176.00   177.00   178.00   178.00   178.00   178.00   178.00</span>
<span class="co">#&gt; [176]   179.00   180.00   180.00   180.00   180.00   180.00   180.00</span>
<span class="co">#&gt; [183]   180.00   180.00   180.00   182.00   183.00   183.00   183.00</span>
<span class="co">#&gt; [190]   184.00   184.00   184.00   185.00   185.00   186.00   190.00</span>
<span class="co">#&gt; [197]   190.00   192.00   210.00   214.00   300.00   511.00   612.00</span>
<span class="co">#&gt; [204]   684.00 10000.00 11111.00</span></code></pre></div>
<p>Examining these heights we see two common mistakes: entries in centimeters, which turn out to be too large, and entries of the form <code>x.y</code> with <code>x</code> and <code>y</code> representing feet and inches respectively. Some of the even smaller values, such as 1.6, could be entries in meters.</p>
<p>In the Data Wrangling Chapter, we will learn techniques for correcting these values and converting them into inches. Here we were able to detect this problem using careful data exploration to uncover issues with the data: the first step in the great majority of data science projects.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="distributions.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="summarizing-data-with-dplyr.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rafalab/dsbook/edit/master/dataviz/robust_summaries.Rmd",
"text": "Edit"
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(script.src))
      script.src  = script.src.replace(/^https?:/, '');
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
